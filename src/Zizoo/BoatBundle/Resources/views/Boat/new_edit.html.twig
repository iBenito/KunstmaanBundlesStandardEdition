{% set step = app.session.get('step') %}

{% block tabs %}
    {{ render(controller('ZizooBaseBundle:Dashboard:charterTabs', { 'current': 'boats' })) }}
{% endblock %}

<div class="content">
    {% include 'ZizooBoatBundle:Boat:boat_navigation.html.twig' with { 'boat': boat, 'current_route': routes['boat_edit_route'], 'routes': routes }  %}
    {% if step != "" %}
        <h1>Step {{ step }}</h1>
    {% endif %}

    {% set formPath = boat.id is null ? path(routes['boat_new_route']) : path(routes['boat_edit_route'], { 'id': boat.id }) %}
    <form class="form" action="{{ formPath }}" method="post" {{ form_enctype(form) }}>

        {{ form_widget(form) }}
        <br />
        {% if step != "" %}
            <button type="submit" class="button blue large">Continue</button>
        {% else %}
            <button type="submit" class="button blue large">Save</button>
        {% endif %}
        <input id="override_url" name="override_url" type="hidden" value="" />
    </form>
    <script type="text/javascript">

        function changeCrew(){
            if ($('#zizoo_boat_crew_optional input[name="zizoo_boat[crew_optional]"]:checked').val()=='1'){
                $('#zizoo_boat_crew_price').attr('disabled', null);
            } else {
                $('#zizoo_boat_crew_price').attr('disabled', 'disabled');
            }
        }

        $(document).ready(function(){
            $('#zizoo_boat_crew_optional input[name="zizoo_boat[crew_optional]"]').change(changeCrew).change();
            {% if boat.id is not null %}
                changed = false;
            {% else %}
                changed = true;
            {% endif %}
        });
    </script>
</div>