{% extends 'ZizooBoatBundle::layout.html.twig' %}
{% trans_default_domain "labels" %}

{% block title %}{{ boat.name }}{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('bundles/zizooboat/js/boat_show.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/colour_gradient.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/datepick/jquery.datepick.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/datepick/jquery.datepick.ext.js') }}"></script>
{% endblock %}
    
{% block stylesheets %}
    {{ parent() }}
    <!--<link href="{{ asset('css/datepick/jquery.datepick.css') }}" type="text/css" rel="stylesheet" />-->
    <link href="{{ asset('css/datepick/ui-ui-zizoo.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('bundles/zizooboat/css/boat.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}

{% block body %}

    <!-- start:name -->
    <section id="name" class="bar">
        <div class="container clearfix">
            {% if boat.crewOptional %}
            <div class="flag">
                Crewed Boat
                <span class="icon plus"></span>
                <div class="tooltip">
                    <p>
                        You are able to charter and drive this boat yourself. A skipper can be booked as an additional extra if required.
                    </p>
                </div>
            </div>
            {% endif %}
            <h1>{{ boat.title }} <span>{{ boat.address.locality }}, {{ boat.address.country }}/Year: ????</span></h1>
            <ul class="social">
                <li><a href="" class="facebook" title="Facebook"></a></li>
                <li><a href="" class="twitter" title="Twitter"></a></li>
            </ul>
        </div>
    </section>
    <!-- end:name -->

    <!-- start:content -->
    <div id="content">
        <div class="container clearfix">

            <!-- start:subnavigation -->
            <ul class="subnavigation overview clearfix">
                <li class="current"><a href="#" title="Photos"><span class="icon photo"></span> Photos</a></li>
                <li><a href="#" title="Location"><span class="icon location white shadow"></span> Location</a></li>
                <li><a href="#" title="Availability"><span class="icon availability"></span> Availability</a></li>
            </ul>
            <!-- end:subnavigation -->


            <!-- start:overview -->
            <div id="overview">

                <!-- start:tabbed -->
                <div class="tabbed">

                    <div class="tab" style="display: block;">
                        <!-- start:media -->
                        <div class="media">
                            <div class="full">
                                <img src="{{ asset(boat.image.first|pictureWebPath) }}" alt="">
                            </div>

                            <a href="#" class="arrow prev ir" title="Previous">Previous</a>
                            <div class="thumbs">
                                <ul class="clearfix">
                                    {% for image in boat.image %}
                                        <li><a href="{{ asset(image|pictureWebPath) }}"><img src="{{ asset(image|pictureWebPath) }}" alt=""></a></li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <a href="#" class="arrow next ir" title="Next">Next</a>
                        </div>
                        <!-- end:media -->
                    </div>

                    <div class="tab" style="display: none;">
                        <!-- start:map -->
                        {{ google_map_container(map) }}
                        <!-- end:map -->
                    </div>

                    <div class="tab" style="display: none;">
                        <!-- start:availability -->
                        <div id="calendar" class=""></div>
                        <!-- end:availability -->
                    </div>
                </div>
                <!-- end:tabbed -->

                <!-- start:description -->
                <section class="section">
                    <header>
                        <h2>Description</h2>
                    </header>

                    <div class="content">
                        <p>{{ boat.description }}</p>
                    </div>
                </section>
                <!-- end:description -->

                <!-- start:details -->
                <section class="section">
                    <header>
                        <h2>Details</h2>
                    </header>

                    <div class="content">
                        <div class="columns clearfix">
                            <ul>
                                <li><strong>Year:</strong> ????.</li>
                                <li><strong>Length Over All:</strong> {{ boat.length }} m</li>
                                <li><strong>Hull Material:</strong> ??</li>
                                <li><strong>Beam:</strong> ?,?? m</li>
                                <li><strong>Draft:</strong> ?,? m</li>
                            </ul>
                            <ul>
                                <li><strong>Engine:</strong> ??</li>
                                <li><strong>Fuel:</strong> ??</li>
                                <li><strong>Fuel Capacity:</strong> ?? l</li>
                                <li><strong>Water Capacity:</strong> ?? l</li>
                                <li><strong>Cabins:</strong> {{ boat.cabins }}</li>
                            </ul>
                            <ul>
                                <li><strong>Berths:</strong> {{ boat.nrGuests }}</li>
                                <li><strong>Shower / Toilet:</strong> ? / {{ boat.bathrooms }}</li>
                                <li><strong>Main Sail:</strong> ?</li>
                                <li><strong>Flag:</strong> {{ boat.address.country }}</li>
                            </ul>
                        </div>
                    </div>
                </section>
                <!-- end:details -->

                <!-- start:extras -->
                <section class="section">
                    <header>
                        <h2>Amenities</h2>
                    </header>                    

                    <div class="content">
                        <div class="columns extras clearfix">
                            {% set perColumn = amenities|length / 3 %}
                            <ul>
                                {% for amenity in amenities %}
                                    {% if loop.index0 is divisibleby(perColumn) %}
                                    </ul>
                                    <ul>
                                    {% endif %}
                                    <li class="{{ boat|displayAmenities(amenity)|raw }}">{{ amenity.name }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </section>
                <!-- end:extras -->

                <!-- start:extras -->
                <section class="section">
                    <header>
                        <h2>Equipment</h2>
                    </header>                    

                    <div class="content">
                        <div class="columns extras clearfix">
                            {% set perColumn = equipment|length / 3 %}
                            <ul>
                                {% for e in equipment %}
                                    {% if loop.index0 is divisibleby(perColumn) %}
                                    </ul>
                                    <ul>
                                    {% endif %}
                                    <li class="{{ boat|displayEquipment(e)|raw }}">{{ e.name }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </section>
                <!-- end:extras -->

            </div>
            <!-- end:overview -->

            <!-- start:sidebar -->
            <aside id="sidebar" class="right clearfix">

                {% render controller('ZizooBoatBundle:Boat:bookingWidget', {id: boat.id, request:request, reservations: reservations, prices: prices}) %}

                <!-- start:avatar -->
                <div class="avatar">
                    <figure>
                        {% if boat.charter.logo is not null %}
                            <img src="{{ asset(charter.logo|pictureWebPath) }}" alt="{{ charter.charterName }}" class="large" id="logo_img" />
                        {% else %}
                            <img src="{{ asset('bundles/zizoobase/images/default/avatar-user.png'|imagine_filter('thumb_190x_')) }}" alt="Charter logo not set" id="logo_img" />
                        {% endif %}
                        <figcaption>
                            {{ boat.charter.charterName }}
                        </figcaption>
                    </figure>
                    <a href="" class="button white big" title="Send Message">Send Message</a>
                </div>
                <!-- end:avatar -->

            </aside>
            <!-- end:sidebar -->

        </div>
    </div>
    <!-- end:content -->

    <script type="text/javascript">
        var availabilityReservedDates   = {{ boat|reservedDates(reservations)|raw }};
        var availabilityPriceDates      = {{ boat|priceDates(prices)|raw }};
        var availabilityDefaultAllowed  = {{ boat.defaultPrice is not null ? 'true' : 'false' }};
        var availabilityDefaultPrice    = {{ boat.defaultPrice is not null ? boat.defaultPrice : 'null' }};
        var STATUS_ACCEPTED             = {{ constant('Zizoo\\ReservationBundle\\Entity\\Reservation::STATUS_ACCEPTED') }};
        var STATUS_SELF                 = {{ constant('Zizoo\\ReservationBundle\\Entity\\Reservation::STATUS_SELF') }};
        var STATUS_HOLD                 = {{ constant('Zizoo\\ReservationBundle\\Entity\\Reservation::STATUS_HOLD') }};
    </script>

{% endblock %}