{% extends 'ZizooBaseBundle:Dashboard/Charter:base.html.twig' %}

{% block tabs %}
{{ render(controller('ZizooBaseBundle:Dashboard:charterTabs', { 'current': 'index' })) }}
{% endblock %}

{% block content %}
    <div class="content">
        <h1>Dashboard</h1>

        <!-- start:links -->
        <section class="links">
            <h2>Alerts</h2>

            {% set num_alerts = 0 %}
            <ul>
                {% if unreadMessages > 0 %}
                <li><a href="{{ path('ZizooBaseBundle_Dashboard_CharterInbox') }}"><span class="circle red">{{ unreadMessages }}</span>Unread messages</a></li>
                {% set num_alerts = num_alerts + unreadMessages %}
                {% endif %}
                {% if reservationRequests > 0 %}
                <li><a href="{{ path('ZizooBaseBundle_Dashboard_CharterBookings') }}"><span class="circle red">{{ reservationRequests }}</span>New Requests</a></li>
                {% set num_alerts = num_alerts + reservationRequests %}
                {% endif %}
                {% if receivedPayments > 0 %}
                <li><a href="{{ path('ZizooBaseBundle_Dashboard_CharterPayments') }}"><span class="circle red">{{ receivedPayments }}</span>Payments received</a></li>
                {% set num_alerts = num_alerts + receivedPayments %}
                {% endif %}
                {% if num_alerts == 0 %}
                <li>You currently have no alerts</li>
                {% endif %}
            </ul>
            
        </section>
        <!-- end:links -->

    </div>
{% endblock %}
{% block sub_content %}
    <!-- start:section -->
    <section class="section">
        <div class="content">

            <!-- start:links -->
            <section class="links">
                <h2>My Boats</h2>
                <ul>
                    <li><a href="{{ path('ZizooBaseBundle_Dashboard_CharterBoats', {listing_status: 'active'}) }}">{{ activeListings }} Active Listings</a></li>
                    <li><a href="{{ path('ZizooBaseBundle_Dashboard_CharterBoats', {listing_status: 'incomplete'}) }}">{{ incompleteListings }} Incomplete Listings</a></li>
                    <li><a href="{{ path('ZizooBaseBundle_Dashboard_CharterBoats', {listing_status: 'hidden'}) }}">{{ hiddenListings }} Hidden Listings</a></li>
                </ul>
            </section>
            <!-- end:links -->

        </div>
    </section>
    <!-- end:section -->

    <!-- start:section -->
    <section class="section">
        <div class="content">

            <!-- start:links -->
            <section class="links">
                <h2>My Bookings</h2>
                <ul>
                    <li><a href="{{ path('ZizooBaseBundle_Dashboard_CharterBookings') }}">{{ reservationRequests }} Pending Requests</a></li>
                    <li><a href="{{ path('ZizooBaseBundle_Dashboard_CharterBookings') }}">{{ upcomingRequests }} Bookings Next 7 Days</a></li>
                    <li><a href="{{ path('ZizooBaseBundle_Dashboard_CharterBookings') }}">{{ acceptedRequests }} Total Bookings</a></li>
                </ul>
            </section>
            <!-- end:links -->

        </div>
    </section>
    <!-- end:section -->

    <!-- start:section -->
    <section class="section">
        <div class="content">

            <!-- start:links -->
            <section class="links">
                <h2>My Payments</h2>

                <ul>
                    <li><a href="{{ path('ZizooBaseBundle_Dashboard_CharterPayments') }}">{{ outstandingPayments }} Outstanding Payments</a></li>
                    <li><a href="{{ path('ZizooBaseBundle_Dashboard_CharterPayments') }}">{{ receivedPayments }} Payments Received</a></li>
                </ul>
            </section>
            <!-- end:links -->

        </div>
    </section>
    <!-- end:section -->

    <!-- start:earned -->
    <div class="earned clearfix">
        <div class="left">
            Zizoo has made you:
        </div>
        <div class="right">
            {{ settledPayouts|displayTotalAmount }} &euro;
        </div>
    </div>
    <!-- end:earned -->
{% endblock %}